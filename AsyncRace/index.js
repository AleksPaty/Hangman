(()=>{"use strict";var e={11:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(601),a=n.n(r),i=n(314),o=n.n(i)()(a());o.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap);"]),o.push([e.id,'.container{padding:12px;position:relative;min-height:100vh;max-height:max-content;background:#5d5959}.container .garage-form{margin:5px auto 32px;height:60px;display:flex;flex-direction:column;align-items:center;gap:8px}.container .garage-form .race-control-wrap{display:flex;gap:20px}.container .garage-form .race-control-wrap .btn_race-start,.container .garage-form .race-control-wrap .btn_reset{width:100px;height:28px;border-radius:5px;box-shadow:0px 1px 5px 0px #d13535;cursor:pointer}.container .garage-form .race-control-wrap .btn_race-start:active,.container .garage-form .race-control-wrap .btn_reset:active{box-shadow:none}.container .garage-form .car-form-wrap{display:flex;gap:2px}.container .garage-form .car-form-wrap .car-change-form .car-name-input{width:130px;margin-right:2px;vertical-align:text-top}.container .garage-form .car-form-wrap .btn_create-car{border-radius:5px;box-shadow:0px 1px 5px 0px #8ff86b;cursor:pointer}.container .garage-form .car-form-wrap .btn_create-car:active{box-shadow:none}.container .garage-form .car-form-wrap .btn_generate-cars{border-radius:5px;box-shadow:0px 1px 5px 0px #d13535;cursor:pointer}.container .garage-form .car-form-wrap .btn_generate-cars:active{box-shadow:none}.container .car-name-input{width:100px;vertical-align:bottom}.container .car-color-input{width:28px;height:24px;background:#deb887}.container .garage-header{margin:16px auto;color:#fff}.container .garage-header h2{margin-bottom:10px;text-align:center}.container .garage-main{width:100%;padding:0;margin-bottom:25px;list-style:none}.container .garage-main .car-race{display:flex;flex-direction:column;justify-content:space-between;margin-bottom:10px;padding-bottom:2px;height:55px;border-bottom:2px dashed #fff;color:#fff}.container .garage-main .car-line_header{display:flex;gap:5px}.container .garage-main .car-line_header .car-change-form{display:block}.container .garage-main .car-line_header .hide{display:none}.container .garage-main .car-line_header .btn_change-car,.container .garage-main .car-line_header .btn_remove-car{font-size:smaller;box-shadow:0px 1px 2px 0px #d13535;cursor:pointer}.container .garage-main .car-line_header .btn_change-car:active,.container .garage-main .car-line_header .btn_remove-car:active{box-shadow:none}.container .garage-main .car-line_main{display:flex;position:relative;gap:8px}.container .garage-main .car-line_main .car-controls{display:flex;align-items:center;gap:2px}.container .garage-main .car-line_main .btn_startMove,.container .garage-main .car-line_main .btn_stopMove{font-size:small;letter-spacing:-1px;background:bisque;cursor:pointer}.container .garage-main .car-line_main .btn_startMove:disabled,.container .garage-main .car-line_main .btn_stopMove:disabled{font-size:x-small;letter-spacing:-1px}.container .garage-main .car-line_main .car{width:50px;height:25px;transform:matrix(-1, 0, 0, 1, 0, 0)}.container .garage-main .car-line_main .car.drive{animation-timing-function:linear}.container .garage-main .car-line_main .race-flag{position:absolute;right:100px}.winnerBlock{position:absolute;display:flex;top:0;left:0;right:0;height:100%;justify-content:center;align-items:center;font-size:24px;color:wheat;text-shadow:3px 0 #000}.winners-page{display:flex;position:absolute;top:36px;left:0;width:100%;min-height:100%;height:max-content;flex-direction:column;align-items:center;z-index:5;background:#5d5959}.winners-page.hide{display:none;overflow:hidden}.winners-page__header{letter-spacing:1px}.winners-page__header{margin:10px auto;display:flex;flex-direction:column;align-items:center;color:#fff}.winners-page__header h2{margin-bottom:16px;text-align:center}.winners-page__table{border-collapse:collapse;border:2px solid #8c8c8c;color:#fff;margin-bottom:20px}.winners-page__table th,.winners-page__table td{border:1px solid #a0a0a0;padding:8px 10px;text-align:center}html{line-height:1.15;-webkit-text-size-adjust:100%}html body{margin:0;box-sizing:border-box;font-family:"Poppins",sans-serif}html *{margin:0;box-sizing:border-box}html a{background-color:rgba(0,0,0,0)}html button,html input,html optgroup,html select,html textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}.header,.main{max-width:1440px}',""]);const c=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(o[s]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&o[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},o=[],c=0;c<e.length;c++){var s=e[c],l=r.base?s[0]+r.base:s[0],d=i[l]||0,h="".concat(l," ").concat(d);i[l]=d+1;var p=n(h),u={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var m=a(u,r);r.byIndex=c,t.splice(c,0,{identifier:h,updater:m,references:1})}o.push(h)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var c=n(i[o]);t[c].references--}for(var s=r(e,a),l=0;l<i.length;l++){var d=n(i[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=s}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{const e=(e,t)=>{const n=document.createElement("form"),r=document.createElement("input"),a=document.createElement("input");return r.type="text",r.className="car-name-input",a.type="color",a.className="car-color-input",t&&(r.value=t.name,a.value=t.color),n.className="car-change-form "+(e?"hide":""),n.append(r,a),n};var t=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))};class r{static createQueryString(e){let t="?";return Object.keys(e).forEach((n=>{t+=`${n}=${e[n]}&`})),t.slice(0,-1)}static getCar(e){return t(this,void 0,void 0,(function*(){try{const t="http://127.0.0.1:3000/garage/";return yield fetch(t+e)}catch(e){console.error("Method getCar Error:",e.message)}}))}static getCars(){return t(this,arguments,void 0,(function*(e=1,t=7){const n={_page:e,_limit:t},a=r.createQueryString(n);return yield fetch("http://127.0.0.1:3000/garage"+a)}))}static updateCar(e,n){return t(this,void 0,void 0,(function*(){try{const t="http://127.0.0.1:3000/garage/";return(yield fetch(t+e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).status}catch(e){throw new Error(e.message)}}))}static deleteCar(e){return t(this,void 0,void 0,(function*(){try{const t="http://127.0.0.1:3000/garage/";return(yield fetch(t+e,{method:"DELETE"})).status}catch(e){throw new Error(e.message)}}))}static createCar(e){return t(this,void 0,void 0,(function*(){try{const t="http://127.0.0.1:3000/garage";return(yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).status}catch(e){throw new Error(e.message)}}))}static startStopRequest(e,n){return t(this,void 0,void 0,(function*(){try{const t="http://127.0.0.1:3000/engine",a={id:e,status:n},i=r.createQueryString(a);return yield fetch(t+i,{method:"PATCH"})}catch(e){throw new Error(e.message)}}))}static switchCarEngine(e){return t(this,void 0,void 0,(function*(){const t={id:e,status:"drive"},n=r.createQueryString(t);return yield fetch("http://127.0.0.1:3000/engine"+n,{method:"PATCH"})}))}static getWinners(e,n){return t(this,arguments,void 0,(function*(e,t,n="ASC",a=10){const i={_page:e,_limit:a,_sort:t,_order:n},o=r.createQueryString(i);try{return yield fetch("http://127.0.0.1:3000/winners"+o)}catch(e){throw new Error(e.message)}}))}static getWinner(e){return t(this,void 0,void 0,(function*(){return yield fetch("http://127.0.0.1:3000/winners/"+e)}))}static createWinner(e){return t(this,void 0,void 0,(function*(){try{const t="http://127.0.0.1:3000/winners";return(yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).status}catch(e){throw new Error(e.message)}}))}static updateWinner(e,n){return t(this,void 0,void 0,(function*(){try{const t="http://127.0.0.1:3000/winners/";return yield fetch(t+e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(e){throw new Error(e.message)}}))}}const a=(e,t,n)=>{const r=document.createElement("div"),a=document.createElement("span"),i=e.querySelector(".car-name").innerText;r.className="winnerBlock",a.className="win-text",n||(a.innerText=`${i} win first (${t}s)!`),n&&(a.innerText=`${i} win ${n} times (${t}s)!`),r.append(a),r.onclick=e=>{e.target.remove()},document.body.append(r)};var i=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))};const o=(e,t)=>{var n;const i=(null===(n=e.parentElement)||void 0===n?void 0:n.offsetWidth)-(e.previousElementSibling.offsetWidth+8)-25-40,o=[{transform:`translateX(${i}px) matrix(-1, 0, 0, 1, 0, 0)`}],c={duration:Math.round(t),iterations:1},s=e.animate(o,c);return s.onfinish=()=>{const n=e,o=(t/1e3).toFixed(2);n.style.transform=`translateX(${i}px) matrix(-1, 0, 0, 1, 0, 0)`,((e,t)=>{return n=void 0,i=void 0,c=function*(){const n=e.closest(".garage-main");if((null==n?void 0:n.classList.contains("race"))&&!(null==n?void 0:n.classList.contains("finish"))){null==n||n.classList.add("finish");const i=e.closest(".car-race"),o=Number(i.dataset.id),c=yield r.getWinner(o);if(404===c.status){a(i,t);const e={id:o,wins:1,time:t};return void r.createWinner(e).catch((e=>{console.error("Method createWinner Error:",e.message)}))}if(200===c.status){const e=yield c.json();e.time>t&&(e.time=t),a(i,t,e.wins),r.updateWinner(o,e).catch((e=>{console.error("Method updateWinner Error:",e.message)}))}}},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{s(c.next(e))}catch(e){t(e)}}function a(e){try{s(c.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}s((c=c.apply(n,i||[])).next())}));var n,i,o,c})(n,+o).catch((()=>console.log("error in controlWinCar, in animation")))},s},c=e=>i(void 0,void 0,void 0,(function*(){const t=e.currentTarget,n=t.parentElement.nextElementSibling,a=t.closest(".car-race");try{if(n.classList.contains("drive")){r.startStopRequest(Number(a.dataset.id),"stopped").catch((e=>{console.error("Method startStopRequest Error:",e.message)}));const e=n.getAnimations()[0];e&&e.cancel(),n.style.transform="matrix(-1, 0, 0, 1, 0, 0)",n.classList.remove("drive");const i=t;t.previousElementSibling.disabled=!1,i.disabled=!0}else{const e=yield r.startStopRequest(Number(a.dataset.id),"started"),i=yield e.json(),c=i.distance/i.velocity;n.classList.add("drive");const s=t;t.nextElementSibling.disabled=!1,s.disabled=!0;const l=o(n,c);500===(yield r.switchCarEngine(Number(a.dataset.id))).status&&l.pause()}}catch(e){console.error("Method carStartHandle Error:",e.message)}})),s=(e,t,n="button")=>{const r=document.createElement("button");return r.classList.add(t),r.innerText=e.toUpperCase(),r.setAttribute("type",n),r},l='<svg fill="#000000" class="car" width="64px" height="64px" viewBox="12 -20 100 65" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="enable-background:new 0 0 122.88 43.49" xml:space="preserve" stroke="#000000" stroke-width="0.0012288">\n    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>\n    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>\n    <g id="SVGRepo_iconCarrier">\n        <style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style>\n        <g>\n            <path class="st0" d="M103.94,23.97c5.39,0,9.76,4.37,9.76,9.76c0,5.39-4.37,9.76-9.76,9.76c-5.39,0-9.76-4.37-9.76-9.76 C94.18,28.34,98.55,23.97,103.94,23.97L103.94,23.97z M23,29.07v3.51h3.51C26.09,30.86,24.73,29.49,23,29.07L23,29.07z M26.52,34.87H23v3.51C24.73,37.97,26.09,36.6,26.52,34.87L26.52,34.87z M20.71,38.39v-3.51H17.2 C17.62,36.6,18.99,37.96,20.71,38.39L20.71,38.39z M17.2,32.59h3.51v-3.51C18.99,29.49,17.62,30.86,17.2,32.59L17.2,32.59z M105.09,29.07v3.51h3.51C108.18,30.86,106.82,29.49,105.09,29.07L105.09,29.07z M108.6,34.87h-3.51v3.51 C106.82,37.97,108.18,36.6,108.6,34.87L108.6,34.87z M102.8,38.39v-3.51h-3.51C99.71,36.6,101.07,37.96,102.8,38.39L102.8,38.39z M99.28,32.59h3.51v-3.51C101.07,29.49,99.71,30.86,99.28,32.59L99.28,32.59z M49.29,12.79c-1.54-0.35-3.07-0.35-4.61-0.28 C56.73,6.18,61.46,2.07,75.57,2.9l-1.94,12.87L50.4,16.65c0.21-0.61,0.33-0.94,0.37-1.55C50.88,13.36,50.86,13.15,49.29,12.79 L49.29,12.79z M79.12,3.13L76.6,15.6l24.13-0.98c2.48-0.1,2.91-1.19,1.41-3.28c-0.68-0.95-1.44-1.89-2.31-2.82 C93.59,1.86,87.38,3.24,79.12,3.13L79.12,3.13z M0.46,27.28H1.2c0.46-2.04,1.37-3.88,2.71-5.53c2.94-3.66,4.28-3.2,8.65-3.99 l24.46-4.61c5.43-3.86,11.98-7.3,19.97-10.2C64.4,0.25,69.63-0.01,77.56,0c4.54,0.01,9.14,0.28,13.81,0.84 c2.37,0.15,4.69,0.47,6.97,0.93c2.73,0.55,5.41,1.31,8.04,2.21l9.8,5.66c2.89,1.67,3.51,3.62,3.88,6.81l1.38,11.78h1.43v6.51 c-0.2,2.19-1.06,2.52-2.88,2.52h-2.37c0.92-20.59-28.05-24.11-27.42,1.63H34.76c3.73-17.75-14.17-23.91-22.96-13.76 c-2.67,3.09-3.6,7.31-3.36,12.3H2.03c-0.51-0.24-0.91-0.57-1.21-0.98c-1.05-1.43-0.82-5.74-0.74-8.23 C0.09,27.55-0.12,27.28,0.46,27.28L0.46,27.28z M21.86,23.97c5.39,0,9.76,4.37,9.76,9.76c0,5.39-4.37,9.76-9.76,9.76 c-5.39,0-9.76-4.37-9.76-9.76C12.1,28.34,16.47,23.97,21.86,23.97L21.86,23.97z"></path>\n        </g>\n    </g>\n</svg>';class d{constructor(e,t,n){this.carName=e,this.carColor=t,this.carId=n}makeCar(e){const t=document.createElement("div");t.insertAdjacentHTML("beforeend",l);const n=t.children[0];n&&(n.classList.add("car"),n.style.fill=this.carColor,e.append(n))}}class h{constructor(e,t,n,r){this.car=new d(e,t,n),this.deleteCarHandle=r}setCar(e,t,n){return this.car=new d(e,t,n),this.makeCarRace()}makeHeaderLine(){const e=document.createElement("div"),t=document.createElement("span"),n=s("change","btn_change-car"),a=s("remove","btn_remove-car");return e.classList.add("car-line_header"),t.className="car-name",t.innerText=this.car.carName,t.style.color=this.car.carColor,n.onclick=(()=>{let e="",t="";return n=>{const a=n.currentTarget,i=a.previousElementSibling,o=i.children[0],c=i.children[1];if(i&&i.classList.contains("hide"))i.classList.remove("hide"),[e,t]=[o.value,c.value];else if(i){if(o.value!==e||c.value!==t){const e=a.closest(".car-race"),t=e.querySelector(".car-name"),n=e.querySelector(".car");r.updateCar(Number(e.dataset.id),{name:o.value,color:c.value}).then((e=>{200===e&&(t.innerText=o.value,n.style.fill=c.value)})).catch((e=>console.error("Method updateCar Error:",e.message)))}i.classList.add("hide")}}})(),a.addEventListener("click",this.deleteCarHandle),e.append(this.carForm(),n,a,t),e}carForm(){return e(!0,{name:this.car.carName,color:this.car.carColor})}makeCarControlElem(e){const t=document.createElement("div");t.className="car-controls";const n=s("start","btn_startMove"),r=s("stop","btn_stopMove");n.onclick=c,r.onclick=c,r.disabled=!0,t.append(n,r),e.append(t)}makeCarRace(){const e=document.createElement("li"),t=document.createElement("div");return e.classList.add("car-race"),e.dataset.id=`${this.car.carId}`,t.className="car-line_main",e.append(this.makeHeaderLine()),e.append(t),this.makeCarControlElem(t),this.car.makeCar(t),t.insertAdjacentHTML("beforeend",'<svg fill="#ff0000" class="race-flag" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50px" height="28px" viewBox="0 0 37.979 37.979" xml:space="preserve" stroke="#ff0000">\n                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>\n                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>\n                    <g id="SVGRepo_iconCarrier">\n                        <g>\n                        <path d="M21.553,2.322C15.45,3.435,9.956,6.693,2.608,3.406c0.096,0.333,0.189,0.667,0.283,1h-1.75L1,3.906H0l8.988,31.75h1 l-4.01-14.167h1.75c0.109,0.39,0.221,0.778,0.33,1.168C15.405,25.942,20.9,22.684,27,21.571 C25.186,15.155,23.369,8.738,21.553,2.322z M9.796,5.831c2.07-0.046,4.032-0.473,5.971-0.983c0.521,1.833,1.039,3.667,1.559,5.5 c-1.938,0.51-3.901,0.937-5.973,0.983C10.834,9.497,10.314,7.664,9.796,5.831z M5.766,20.739L1.354,5.156h1.75 c1.472,5.194,2.941,10.389,4.412,15.583H5.766z M7.173,15.991c-0.508-1.792-1.017-3.583-1.522-5.375 c2.046,0.751,3.951,1.005,5.773,0.964c0.507,1.792,1.015,3.583,1.521,5.375C11.125,16.996,9.219,16.742,7.173,15.991z M20.651,22.098c-1.938,0.511-3.9,0.937-5.972,0.982c-0.519-1.834-1.038-3.667-1.558-5.5c2.069-0.046,4.032-0.473,5.973-0.983 C19.613,18.432,20.133,20.264,20.651,22.098z M24.039,14.635c-1.729,0.375-3.414,0.889-5.121,1.337 c-0.508-1.792-1.016-3.583-1.521-5.375c1.706-0.449,3.395-0.962,5.12-1.337C23.023,11.052,23.531,12.843,24.039,14.635z M23.227,5.446c0.096,0.333,0.189,0.667,0.283,1c0.787-0.118,1.584-0.195,2.398-0.213c0.52,1.833,1.037,3.667,1.557,5.5 c-0.813,0.018-1.611,0.095-2.396,0.213c0.591,2.083,1.181,4.167,1.771,6.25c0.785-0.118,1.584-0.195,2.396-0.213 c0.521,1.833,1.039,3.667,1.56,5.5c-2.07,0.045-4.033,0.473-5.974,0.981c-0.121-0.432-0.243-0.86-0.364-1.291 c-2.018,0.529-4.008,1.15-6.068,1.525c0.217,0.766,0.434,1.529,0.649,2.293c6.101-1.113,11.597-4.371,18.94-1.086 c-1.814-6.416-3.633-12.833-5.449-19.25C29.11,5.128,26.094,5.015,23.227,5.446z M34.833,18.322 c-2.046-0.751-3.95-1.005-5.772-0.964c-0.508-1.792-1.016-3.583-1.521-5.375c1.82-0.041,3.727,0.213,5.771,0.964 C33.817,14.739,34.326,16.53,34.833,18.322z"></path>\n                        </g>\n                    </g>\n                </svg>'),e}}class p{constructor(){this.page=1,this.cars=null,this.carCount=0,this.lastCarId=1,this.header=document.createElement("div"),this.main=document.createElement("ul"),this.main.className="garage-main"}headerTextRender(e){const t=document.createElement("h2"),n=document.createElement("span");t.innerText=`Garage(${e})`,n.innerText=`Page # ${this.page}`,this.header.append(t,n)}changeHeaderText(e,t){e&&(this.header.children[0].innerText=`Garage(${e})`),t&&(this.header.children[1].innerText=`Page # ${this.page}`)}getGarageData(){return e=this,t=arguments,a=function*(e=1){try{const t=yield r.getCars(e),n=yield t.json();this.cars=n,this.carCount=Number(t.headers.get("X-Total-Count")),this.setLastId(n[n.length-1].id)}catch(e){throw new Error(e)}},new((n=void 0)||(n=Promise))((function(r,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function c(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((a=a.apply(e,t||[])).next())}));var e,t,n,a}setCarCount(e){return e>0&&(this.carCount=e),this.carCount}setLastId(e){return e>0&&(this.lastCarId=e),this.lastCarId}addDeleteCarHandle(e){(e=>i(void 0,void 0,void 0,(function*(){let t=!1;try{const n=e.currentTarget.closest(".car-race");(yield r.deleteCar(Number(n.dataset.id)))&&(t=!0)}catch(e){console.error("Method deleteCar Error:",e.message)}return t})))(e).then((t=>{if(t)if(this.carCount<8){const t=e.target.closest(".car-race");null==t||t.remove(),this.setCarCount(this.carCount-1),this.changeHeaderText(this.carCount)}else this.main.replaceChildren(),this.render(this.page),this.changeHeaderText(this.carCount-1)})).catch((e=>console.error(e.message)))}changePage(e){this.page=e,this.render(e),this.changeHeaderText(null,this.page)}render(e=1){this.getGarageData(e).then((()=>{var e;this.header.children.length<1&&(this.header.classList.add("garage-header"),this.headerTextRender(this.carCount));const t=new h("name","color",999,this.addDeleteCarHandle.bind(this));null===(e=this.cars)||void 0===e||e.forEach((e=>{this.main.append(t.setCar(e.name,e.color,e.id))}))})).catch((e=>console.error(e)))}addRenderElem(e,t=1){this.render(t),e.append(this.header,this.main)}}const u=e=>{const t=e.currentTarget,n="RACE"===t.innerText?"btn_startMove":"btn_stopMove",r=document.body.querySelector(".garage-main"),a=null==r?void 0:r.querySelectorAll(`.${n}`);"RACE"===t.innerText?(null==r||r.classList.add("race"),t.disabled=!0):(t.previousElementSibling.disabled=!1,null==r||r.classList.remove("finish"),null==r||r.classList.remove("race")),null==a||a.forEach((e=>{e.click()}))};class m{constructor(){this.main=document.createElement("div")}makeRaceControlBtn(){const e=document.createElement("div"),t=s("race","btn_race-start"),n=s("reset","btn_reset");e.className="race-control-wrap",t.onclick=u,n.onclick=u,e.append(t,n),this.main.append(e)}makeCreateCarForm(){const t=document.createElement("div"),n=s("create","btn_create-car"),r=s("generate cars","btn_generate-cars");t.className="car-form-wrap",t.append(e(!1),n,r),this.main.append(t),this.returnButtonsElem=()=>[n,r]}returnButtonsElem(){}render(e){this.main.className="garage-form",this.makeRaceControlBtn();const t=this.makeCreateCarForm();return e.append(this.main),t}}class g{constructor(e,t){this.elemWrapper=document.createElement("div"),this.buttonPrev=s("prev",`${e}`),this.buttonPrev.disabled=!0,this.buttonNext=s("next",`${t}`),this.elemWrapper.className="garage-pagination",this.elemWrapper.append(this.buttonPrev,this.buttonNext)}}class f{constructor(){this.headerBLock=new m,this.garageBlock=new p,this.pagination=new g("btn_garagePrev","btn_garageNext")}addEvents(){const e=this.headerBLock.returnButtonsElem(),[t,n]=e,a=new h("name","color",1,this.garageBlock.addDeleteCarHandle.bind(this.garageBlock));t.addEventListener("click",(e=>((e,t,n,a)=>{const i=e.currentTarget,o=document.body.querySelector(".garage-main"),c=i.previousElementSibling,s=null==c?void 0:c.children[0],l=null==c?void 0:c.children[1];if(""===s.value)return;const d={name:s.value,color:l.value};s.value="",l.value="#000000",r.createCar(d).then((e=>{var r;if(201===e){const e=null===(r=null==o?void 0:o.previousElementSibling)||void 0===r?void 0:r.children[0],i=Number(e.innerText.at(-2));if(a(i+1),e.innerText=`Garage(${i+1})`,o&&o.children.length<7){const e=n(0),r=n(e+1);null==o||o.append(t(d.name,d.color,r))}}})).catch((e=>console.error("Method deleteCar Error:",e.message)))})(e,a.setCar.bind(a),this.garageBlock.setLastId.bind(this.garageBlock),this.garageBlock.setCarCount.bind(this.garageBlock)))),console.log(n),this.pagination.buttonNext.onclick=e=>this.paginationHandle.bind(this)(e),this.pagination.buttonPrev.onclick=e=>this.paginationHandle.bind(this)(e)}paginationHandle(e){const t=e.target,{page:n}=this.garageBlock;"NEXT"!==t.innerText?"PREV"===t.innerText&&(this.garageBlock.main.replaceChildren(),this.garageBlock.changePage(n-1),n-1<2&&(t.disabled=!0)):7*(n+1)-6<=this.garageBlock.carCount&&(this.garageBlock.main.replaceChildren(),this.garageBlock.changePage(n+1),t.previousElementSibling.disabled=!1)}render(){const e=document.createDocumentFragment();return document.body.append(e),this.headerBLock.render(e),this.garageBlock.addRenderElem(e),e.append(this.pagination.elemWrapper),this.addEvents(),e}}var v=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))};class b{constructor(){this.winnersCount=0,this.winnersPage=1,this.header=document.createElement("thead"),this.body=document.createElement("tbody"),this.header.className="winners-page__table-header",this.makeHeader()}setPage(e){return e>0&&(this.winnersPage=e),this.winnersPage}makeHeader(){const e=document.createElement("tr");for(let t=0;t<5;t+=1){const n=document.createElement("th");switch(t){case 0:n.innerText="№";break;case 1:n.innerText="Car";break;case 2:n.innerText="Name";break;case 3:n.innerText="Wins";break;case 4:n.innerText="Best time(s)"}e.append(n)}this.header.append(e)}carSetting(e,t){const n=e;n.style.fill=`${t}`,n.setAttribute("width","50px"),n.setAttribute("height","50px"),n.setAttribute("viewBox","0 0 125 40")}makeRow(e,t){const n=Object.assign({numb:e},t),r=document.createElement("tr");return Object.keys(n).forEach((e=>{const t=document.createElement("td");if("color"!==e&&(t.innerText=`${n[e]}`),"color"===e){t.insertAdjacentHTML("beforeend",l);const r=t.children[0];this.carSetting(r,`${n[e]}`)}r.append(t)})),r}getWinnerCars(){return v(this,arguments,void 0,(function*(e="ASC",t="id",n=this.winnersPage){const a=yield r.getWinners(n,t,e);return this.winnersCount=Number(a.headers.get("X-Total-Count")),yield a.json()}))}bundleFullCarData(e){return v(this,void 0,void 0,(function*(){try{const t=yield r.getCar(e.id),n=yield null==t?void 0:t.json();return{color:n.color,name:n.name,wins:e.wins,time:e.time}}catch(e){console.error(e.message)}}))}render(e){this.body.firstChild&&this.body.replaceChildren(),this.getWinnerCars().then((t=>{t.forEach(((t,n)=>v(this,void 0,void 0,(function*(){e(this.winnersCount,this.winnersPage);const r=yield this.bundleFullCarData(t);this.body.append(this.makeRow(n+1,r))}))))})).catch((e=>console.error("Error render win cars",e.message)))}}class x{constructor(){this.winnersTable=new b,this.pagination=new g("btn_winnerPrev","btn_winnerNext"),this.contentWrapper=document.createElement("div"),this.headerBLock=document.createElement("div"),this.mainBlock=document.createElement("table"),this.contentWrapper.className="winners-page hide",this.headerBLock.className="winners-page__header",this.mainBlock.className="winners-page__table"}makeHeaderBlock(){const e=document.createElement("h2"),t=document.createElement("span");e.innerText=`Winners (${this.winnersTable.winnersCount})`,t.innerText=`Page # ${this.winnersTable.winnersPage}`,this.headerBLock.firstChild||this.headerBLock.append(e,t)}changeHeaderBlock(e,t){const n=this.headerBLock.children[0],r=this.headerBLock.children[1];e&&(n.innerText=`Winners (${e})`),t&&(r.innerText=`Page # ${t}`)}addPaginationHandle(){const e=(e,t)=>{const n=e.target,r=t(0);"NEXT"===n.innerText&&this.winnersTable.winnersCount>10*r&&(t(r+1),this.winnersTable.render(this.changeHeaderBlock.bind(this)),n.previousElementSibling.disabled=!1),"PREV"===n.innerText&&(t(r-1),r-1<2&&(n.disabled=!0),this.winnersTable.render(this.changeHeaderBlock.bind(this)))};this.pagination.buttonPrev.onclick=t=>{e(t,this.winnersTable.setPage.bind(this.winnersTable))},this.pagination.buttonNext.onclick=t=>{e(t,this.winnersTable.setPage.bind(this.winnersTable))}}clearWrapper(){this.contentWrapper.replaceChildren()}render(){this.clearWrapper(),this.makeHeaderBlock(),this.addPaginationHandle(),this.mainBlock.firstChild&&this.mainBlock.replaceChildren(),this.mainBlock.append(this.winnersTable.header,this.winnersTable.body),this.contentWrapper.append(this.headerBLock,this.mainBlock,this.pagination.elemWrapper),this.winnersTable.render(this.changeHeaderBlock.bind(this))}}console.log("Hallo world"),(new class{constructor(){this.garagePage=new f,this.winnersPage=new x,this.container=document.createElement("div"),this.controlElem=document.createElement("div"),this.contentElem=document.createElement("div"),this.container.className="container",this.controlElem.className="page-control-wrap",this.contentElem.className="content-field"}makeControlBtns(){const e=s("to garage","btn_to-garage"),t=s("to winners","btn_to-winners");e.onclick=this.makeControlHandle.bind(this),t.onclick=this.makeControlHandle.bind(this),this.controlElem.append(e,t)}makeControlHandle(e){const t=e.target;t.innerText==="to winners".toUpperCase()&&(this.winnersPage.render(),this.winnersPage.contentWrapper.classList.remove("hide")),t.innerText==="to garage".toUpperCase()&&(this.winnersPage.clearWrapper(),this.winnersPage.contentWrapper.classList.add("hide"))}makeBasicStructure(){this.makeControlBtns(),document.body.append(this.container),this.container.append(this.controlElem,this.contentElem)}render(){this.makeBasicStructure(),this.contentElem.append(this.garagePage.render(),this.winnersPage.contentWrapper)}}).render();var w=n(72),y=n.n(w),C=n(825),k=n.n(C),E=n(659),_=n.n(E),T=n(56),L=n.n(T),P=n(540),B=n.n(P),S=n(113),M=n.n(S),N=n(11),H={};H.styleTagTransform=M(),H.setAttributes=L(),H.insert=_().bind(null,"head"),H.domAPI=k(),H.insertStyleElement=B(),y()(N.A,H),N.A&&N.A.locals&&N.A.locals})()})();