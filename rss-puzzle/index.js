(()=>{"use strict";var e={11:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap);"]),a.push([e.id,'.login__form{margin-inline:20px;padding:40px 16px;max-width:360px;background-color:rgba(255,255,255,.2);border:2px solid rgba(255,255,255,.7);color:#fff;border-radius:16px;backdrop-filter:blur(16px)}.login__title{margin:20px 0;text-align:center;font-size:40px}.login__body{display:grid;row-gap:20px;margin-bottom:16px}.login__body_wrap{display:grid;padding-inline:20px;grid-template-columns:1fr max-content;column-gap:12px;align-items:center;border:2px solid rgba(255,255,255,.7);border-radius:64px}.login__body_input{outline:none;width:100%;background:none;border:none;color:#fff;padding-block:16px}.login__body_input::placeholder{color:#fff}.login__button{width:100%;padding:16px;margin-bottom:16px;background-color:#fff;border-radius:64px;color:#000;font-weight:500;cursor:pointer;border:none;outline:none}.start-page{position:relative;display:flex;justify-content:center;align-items:center;height:100vh;align-items:center}.start-page.empty{display:none}.start-page__img{position:absolute;width:100%;height:100%;object-fit:cover;object-position:center}.welcome{position:relative;display:flex;flex-direction:column;align-items:center;padding:16px 16px;padding-bottom:85px}.welcome__header{margin:16px 0;font-weight:400;color:#fff;letter-spacing:5px}.welcome__p1,.welcome__p2{margin:0;line-height:24px;color:#fff}.welcome__btn{margin-top:35px;width:90px;height:32px;border:none;border-radius:4px;box-shadow:0px 0px 5px aqua;cursor:pointer}.welcome__btn:active{box-shadow:0px 0px 0px aqua}.main__puzzle-header{display:flex}.main__wordTranslate{text-align:center;font-style:oblique}.main__puzzleField{width:100%;height:324px;background-color:#bbaeae}.main__puzzleField_lines{display:flex}.main__puzzleField_lines .word-puzzle{padding:7px 10px;text-align:center;box-shadow:inset 0px 1px 1px 0px red;text-shadow:1px 1px 2px pink;background-color:#7fffd4;cursor:pointer}.main__puzzleField_lines .word-puzzle.first::after,.main__puzzleField_lines .word-puzzle.middle::after{box-shadow:inset -1px 0px 1px 0px red;background-color:#7fffd4}.main__puzzleField_lines .word-puzzle.last::before,.main__puzzleField_lines .word-puzzle.middle::before{background-color:#bbaeae}.main__puzzleField_lines .word-puzzle.wrong{background-color:red}.main__wordsField{margin:20px auto;height:30px;display:flex;max-width:800px;width:fit-content}.main__wordsField .word-puzzle{padding:7px 10px;text-align:center;box-shadow:inset 0px 1px 1px 0px red;text-shadow:1px 1px 2px pink;background-color:#b5cfc4;cursor:pointer}.main__wordsField .word-puzzle.first::after,.main__wordsField .word-puzzle.middle::after{box-shadow:inset -1px 0px 1px 0px red;background-color:#b5cfc4}.main__wordsField .word-puzzle.last::before,.main__wordsField .word-puzzle.middle::before{background-color:#fff}.main__wordsField .word-puzzle:hover{box-shadow:1px 1px 2px 0px red}.main__btn-wrap{margin:0 auto;display:flex;justify-content:center;gap:60px}.main__continueBtn,.main__autoFillBtn{display:block;padding:6px 10px;background:#f77342;border-radius:5px;border:none;box-shadow:0px 0px 2px 0px #000;color:#fff;cursor:pointer}.main__continueBtn:disabled,.main__autoFillBtn:disabled{background:#eeb09a;cursor:auto}.word-puzzle{position:relative}.word-puzzle.first::after,.word-puzzle.middle::after{content:"";display:block;position:absolute;width:14px;height:15px;left:98%;top:25%;border-top-left-radius:140px;border-bottom-left-radius:140px;border-top-right-radius:125px;border-bottom-right-radius:125px;z-index:2}.word-puzzle.last::before,.word-puzzle.middle::before{content:"";display:block;position:absolute;width:14px;height:15px;left:0%;top:25%;border-top-left-radius:125px;border-bottom-left-radius:125px;border-top-right-radius:140px;border-bottom-right-radius:140px;z-index:1}@media(max-width: 814px){.main__wordsField{width:auto}}.container{max-width:800px;margin:0 auto}.header .container{padding:10px 0;display:flex;justify-content:space-between}.header__greeter{margin:0;font-size:25px}.header__btn{padding:0 10px;background-color:#f77342;border-radius:64px;border:none;box-shadow:0px 0px 2px 1px #000;color:#fff;font-weight:500;cursor:pointer;outline:none}html{line-height:1.15;-webkit-text-size-adjust:100%}html body{margin:0;box-sizing:border-box;font-family:"Poppins",sans-serif}html a{background-color:rgba(0,0,0,0)}html button,html input,html optgroup,html select,html textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}.header,.main{max-width:1440px}',""]);const s=a},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(a[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&a[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var d=e[s],l=r.base?d[0]+r.base:d[0],c=i[l]||0,p="".concat(l," ").concat(c);i[l]=c+1;var u=n(p),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var m=o(h,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:m,references:1})}a.push(p)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var d=r(e,o),l=0;l<i.length;l++){var c=n(i[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=d}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.nc=void 0,(()=>{const e=(e,t,n=void 0,r=void 0,o=void 0)=>{const i=document.createElement(`${e}`);return i.classList.add(`${t}`),n&&(i.innerText=n),o&&o.forEach((e=>{Object.keys(e).forEach((t=>{i.setAttribute(t,e[t])}))})),r&&r.append(i),i};var t=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{d(r.next(e))}catch(e){i(e)}}function s(e){try{d(r.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}d((r=r.apply(e,t||[])).next())}))};class r{constructor(e){this.viewTool="wordView",this.levelWords=e}getData(e,n=this.levelWords){return t(this,void 0,void 0,(function*(){const t=yield(e=>{return t=void 0,n=void 0,o=function*(){try{const t=yield fetch(`https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/data/wordCollectionLevel${e}.json`);return yield t.json()}catch(e){return void console.error(e)}},new((r=void 0)||(r=Promise))((function(e,i){function a(e){try{d(o.next(e))}catch(e){i(e)}}function s(e){try{d(o.throw(e))}catch(e){i(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}d((o=o.apply(t,n||[])).next())}));var t,n,r,o})(n);this.data=null==t?void 0:t.rounds,this.setСurrentRound(e)}))}setСurrentRound(e){this.data&&(this.currentRound=this.data[e])}mixedWords(e){const t=[...e];for(let e=t.length-1;e>0;e-=1){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}getRoundData(e,n){return t(this,void 0,void 0,(function*(){if(this.data&&0!==e||(yield this.getData(n)),this.currentRound){const t=this.currentRound.words[e].textExample.split(" "),n=this.currentRound.words[e].textExample.length-t.length-1;return{audioExample:this.currentRound.words[e].audioExample,baseWordsArr:t,mixedWordsArr:this.mixedWords(t),sentenceLength:n,translateSentence:this.currentRound.words[e].textExampleTranslate}}console.log("currentRound not find")}))}}class o{constructor(){this.baseWords=null,this.wordTask=null,this.sentenceLength=null}setWordProps(e,t,n){this.baseWords=e,this.wordTask=t,this.sentenceLength=n}buildWordElems(t,n){var r;const o=document.createDocumentFragment(),i=e=>{this.replaceWordHandler(e,t,n)};return null===(r=this.wordTask)||void 0===r||r.forEach(((n,r)=>{if(t.previousElementSibling){const e=t.previousElementSibling.children[r];e&&e.removeEventListener("click",i)}const a=e("div","word-puzzle",`${n}`),s=800/this.sentenceLength*n.length;a.style.width=Math.ceil(s)-25+"px",this.baseWords&&this.baseWords[0]===n&&a.classList.add("first"),this.baseWords&&this.baseWords[this.baseWords.length-1]===n&&a.classList.add("last"),this.baseWords&&this.baseWords[0]!==n&&this.baseWords[this.baseWords.length-1]!==n&&a.classList.add("middle"),a.addEventListener("click",i),o.append(a)})),o}replaceWordHandler(e,t,n,r){var o;const i=e.target,a=i.cloneNode(!0),s=i.parentElement,d=null===(o=null==s?void 0:s.nextElementSibling)||void 0===o?void 0:o.children[1];a.style.width=i.offsetWidth-20+"px",a.addEventListener("click",(e=>{this.replaceWordHandler(e,s,n)})),t.append(a),i.remove(),(null==s?void 0:s.classList.contains("main__wordsField"))&&0===(null==s?void 0:s.children.length)?(null==d||d.removeAttribute("disabled"),n(t)&&d&&(d.innerText="Continue"),n(t)||"Continue"!==d.innerText||(d.innerText="Check")):r&&r.previousElementSibling!==s&&(null==s?void 0:s.children.length)!==this.sentenceLength&&"Continue"===r.innerText&&(r.innerText="Check")}render(e,t,n,r,o,i){this.setWordProps(e,t,n);const a=this.buildWordElems(r,i);o.append(a)}}class i{constructor(){this.wordTool=new r("1"),this.wordView=new o,this.puzzleField=e("div","main__puzzleField"),this.wordTranslateElem=e("p","main__wordTranslate"),this.roundIndex=0,this.wordIndex=0}gameHeaderBuild(t){e("div","main__puzzle-header",void 0,t)}gameBodyBuild(t){t.append(this.puzzleField),this.wordsField=e("div","main__wordsField",void 0,t);const n=e("div","main__btn-wrap",void 0,t),r=e("button","main__autoFillBtn","Auto-Complete",n,[{type:"button"}]),o=e("button","main__continueBtn","Check",n,[{type:"button",disabled:""}]);r.addEventListener("click",this.autoFillHandle.bind(this)),o.addEventListener("click",(e=>this.checkAndContinue(e,t))),this.wordIndex>0&&(this.wordIndex=0),this.roundIndex>0&&(this.roundIndex=0),this.addNewWords(t,0,0)}autoFillHandle(t){var n,r;const o=this.puzzleField.children[this.puzzleField.children.length-1],i=o.children,a=null===(n=this.wordData)||void 0===n?void 0:n.baseWordsArr,s=t.target.nextElementSibling;for(let t=0;t<a.length;t+=1){const n=i.item(t),r=a[t];if(n&&(n.removeAttribute("style"),n.style.flexGrow="1"),!n){const n=e("div","word-puzzle",`${r}`,o);n.style.flexGrow="1",0===t&&n.classList.add("first"),t===a.length-1&&n.classList.add("last"),t>0&&t<a.length-1&&n.classList.add("middle")}n&&n.innerText!==r&&(n.innerText=r)}null===(r=this.wordsField)||void 0===r||r.replaceChildren(),s.disabled=!1,s.innerText="Continue"}addNewWords(t,n=this.wordIndex,r=this.roundIndex){0===this.wordIndex&&this.puzzleField.children.length>0&&this.puzzleField.replaceChildren();const o=e("div","main__puzzleField_lines",void 0,this.puzzleField);this.wordTool.getRoundData(n,r).then((e=>{e&&(this.wordView.render(e.baseWordsArr,e.mixedWordsArr,e.sentenceLength,o,this.wordsField,this.checkFillWords.bind(this)),this.wordTranslateElem.innerText=e.translateSentence),t.prepend(this.wordTranslateElem),this.wordData=e})).catch((e=>console.log(e))),this.wordIndex<10&&(this.wordIndex+=1),this.wordIndex>=10&&(this.wordIndex=0,this.roundIndex+=1)}checkFillWords(e){var t;const n=e.children;let r=0;for(let e=0;e<n.length;e+=1){const o=n.item(e),i=null===(t=this.wordData)||void 0===t?void 0:t.baseWordsArr[e];(null==o?void 0:o.innerHTML)!==i&&(null==o||o.classList.add("wrong"),setTimeout((()=>null==o?void 0:o.classList.remove("wrong")),1e3),r+=1)}return!(r>0)}checkAndContinue(e,t){const n=document.querySelectorAll(".main__puzzleField_lines"),r=n[n.length-1],o=e.target;console.log(this.wordIndex),"Continue"===o.innerText&&(this.addNewWords(t),o.innerText="Check",o.disabled=!0),"Check"===o.innerText&&this.checkFillWords(r)}render(e){this.gameHeaderBuild(e),this.gameBodyBuild(e)}}class a{constructor(e=void 0){this.storageKey="user",e&&(this.storageKey=e)}saveData(e,t){localStorage.setItem(e,JSON.stringify(t))}getData(){const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):null}removeData(e){localStorage.removeItem(e)}}class s{constructor(){this.headerElem=e("div","header"),this.mainElem=e("div","main"),this.puzzleGameElem=new i,this.wordTools=new r("1"),this.storageService=new a,this.logOutBtn=e("button","header__btn","Log out",void 0,[{type:"button"}])}fillHeader(){const t=this.storageService.getData(),n=e("div","container",void 0,this.headerElem);e("p","header__greeter",`Hallo, ${null==t?void 0:t.firstName} ${null==t?void 0:t.surname}`,n),n.append(this.logOutBtn)}removePage(){this.headerElem.replaceChildren(),this.mainElem.replaceChildren()}render(){this.fillHeader();const t=e("div","container",void 0,this.mainElem);this.puzzleGameElem.render(t)}}class d{constructor(e,t=1){this.valueInputs=e,this.amountBtn=t}buildForm(t){const n=e("form","login__form",void 0,void 0,[{action:""}]);return e("h2","login__title","Login",n),n.addEventListener("submit",(e=>{e.preventDefault();const[r,o]=n.querySelectorAll("input"),i={firstName:r.value,surname:o.value};this.removeForm(n),t(i)})),n}buildInputs(){const t=e("div","login__body"),n=document.createDocumentFragment();return this.valueInputs.forEach(((t,r)=>{const o=e("div","login__body_wrap");e("input","login__body_input",void 0,o,[{type:t},{placeholder:0===r?"First Name":"Surname"},{pattern:""+(0===r?"^[A-Z][a-z\\-]{2,}":"^[A-Z][a-z\\-]{3,}")},{title:"The first letter must be capitalized. Use Latin letters and (-). Min length: "+(r?4:3)},{required:""}]),n.append(o)})),t.appendChild(n),t}buildButton(){const t=document.createDocumentFragment();for(let n=1;n<=this.amountBtn;n+=1){const n=e("button","login__button","Login",void 0,[{type:"submit"}]);t.appendChild(n)}return t}removeForm(e){e.remove()}render(e,t){const n=this.buildForm(t),r=this.buildInputs(),o=this.buildButton();n.append(r),n.append(o),e.append(n)}}const l=n.p+"assets/bgImage.png";class c{constructor(){this.startElem=e("div","start-page"),this.storageService=new a,this.loginForm=new d(["text","text"],1),this.descriptionWrap=e("div","description__wrapper"),this.goMainPageBtn=e("button","welcome__btn","Start",void 0,[{type:"button"}])}buildStartImg(){l&&e("img","start-page__img",void 0,this.startElem,[{src:"./assets/bgImage.png"},{alt:"image"}])}buildWelcomeElem(){const t=this.storageService.getData(),n=e("div","welcome");return e("h1","welcome__header","ENGLISH PUZZLE",n),e("p","welcome__p1",`Welcome ${null==t?void 0:t.firstName} ${null==t?void 0:t.surname}.`,n),e("p","welcome__p1","Click on words, collect phrases.",n),e("p","welcome__p2","Words can be drag and drop. Select tooltips in the menu",n),n.append(this.goMainPageBtn),n}removeWelcomeElem(){this.startElem.replaceChildren(),this.startElem.classList.add("empty")}chooseRenderElem(){this.startElem.classList.remove("empty"),this.storageService.getData()?this.startElem.append(this.buildWelcomeElem()):this.loginForm.render(this.startElem,this.redirectToWelcomePage.bind(this))}redirectToWelcomePage(e){this.storageService.saveData(this.storageService.storageKey,e),this.chooseRenderElem()}render(){return this.buildStartImg(),this.chooseRenderElem(),this.startElem}}class p{constructor(){this.startPage=new c,this.mainPage=new s}changePageToMain(){document.body.append(this.mainPage.headerElem),document.body.append(this.mainPage.mainElem),this.mainPage.render(),this.startPage.removeWelcomeElem()}logOutHandle(){this.mainPage.storageService.removeData("user"),this.mainPage.removePage(),document.body.append(this.startPage.render())}render(){document.body.append(this.startPage.render()),this.startPage.goMainPageBtn.onclick=this.changePageToMain.bind(this),this.mainPage.logOutBtn.onclick=this.logOutHandle.bind(this)}}var u=n(72),h=n.n(u),m=n(825),g=n.n(m),f=n(659),x=n.n(f),b=n(56),v=n.n(b),w=n(540),_=n.n(w),y=n(113),z=n.n(y),E=n(11),F={};F.styleTagTransform=z(),F.setAttributes=v(),F.insert=x().bind(null,"head"),F.domAPI=g(),F.insertStyleElement=_(),h()(E.A,F),E.A&&E.A.locals&&E.A.locals,(new class{constructor(){this.route=new p}render(){this.route.render()}start(){this.render()}}).start(),console.log("Hello word")})()})();